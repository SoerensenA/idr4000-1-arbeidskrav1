<<<<<<< HEAD
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
=======
source("~/R/Arbeidskrav1/idr4000-1-arbeidskrav1/data/script.R")
source("~/R/Arbeidskrav1/idr4000-1-arbeidskrav1/script.R")
library(tidyverse)
library(readxl)
read_excel(humac-data)
read_excel("humac-data")
read_excel(humac-data.xlsx)
read_excel("humac-data.xlsx")
read_xlsx("humac-data.xlsx")
read_xlsx("humac-data.xlsx")
read_xlsx("/data/humac-data.xlsx")
("/data/humac-data.xlsx")
read_xlsx("/data/humac-data.xlsx")
read_xlsx("data/humac-data.xlsx")
data <- read_xlsx("data/humac-data.xlsx")
data <- read_xlsx("data/humac-data.xlsx") %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60, pt.480) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60, pt.480) %>%
group_by(timepoint)%>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60, pt.480) %>%
pivot_wider(names_from = timepoint) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60, pt.480) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
filter(!is.na(data)) %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
filter(!is.na(data)) %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
filter(!is.na(data)) %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(!is.na)
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(pre = !is.na)
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(pre != is.na)
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(pre != is.na)
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(pt.60 != is.na)
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(pt.60 != na)
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(pt.60 != is.na(data)) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(pt.60 != is.na(data)) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(pt.60 != is.na(data)) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(pt.60 != is.na(data)) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
)) %>%
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
filter(!is.na(data)) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff),
te = s / sqrt(2)) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff),
te = s / sqrt(2),
m = mean(c(pre, post))) %>%
print()
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff),
te = s / sqrt(2),
m = mean(c(pre, post)),
cv = (te / m) * 100)) %>%
data <- read_xlsx("data/humac-data.xlsx") %>%
select(fp, timepoint, leg, pt.60) %>%
pivot_wider(names_from = timepoint, values_from = pt.60) %>%
mutate(diff = pre - post) %>%
summarise(s = sd(diff),
te = s / sqrt(2),
m = mean(c(pre, post)),
cv = (te / m) * 100) %>%
print()
data <- read_excel("data/humac-data.xlsx") %>%
mutate(pt.120 = as.numeric(pt.120),
ttp.120 = as.numeric(ttp.120),
pt.240 = as.numeric(pt.240),
ttp.240 = as.numeric(ttp.240),
pt.360 = as.numeric(pt.360),
ttp.360 = as.numeric(ttp.360),
pt.480 = as.numeric(pt.480),
ttp.480 = as.numeric(ttp.480),
pt.iso = as.numeric(pt.iso),
ttp.iso = as.numeric(ttp.iso))
data %>%
pivot_longer(names_to = "variable",
values_to = "values",
cols = pt.60:ttp.iso) %>%
pivot_wider(names_from = timepoint,
values_from = values) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable) %>%
>>>>>>> 1a5e2ed26a583b4c0d35ceaf2e34213c18098722
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
<<<<<<< HEAD
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>% print()
tab <- data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
=======
print()
install.packages("readxl")
library(tidyverse)
library(readxl)
library(gt)
library(gt_tbl)
data <- read_excel("data/humac-data.xlsx") %>%
mutate(pt.120 = as.numeric(pt.120),
ttp.120 = as.numeric(ttp.120),
pt.240 = as.numeric(pt.240),
ttp.240 = as.numeric(ttp.240),
pt.360 = as.numeric(pt.360),
ttp.360 = as.numeric(ttp.360),
pt.480 = as.numeric(pt.480),
ttp.480 = as.numeric(ttp.480),
pt.iso = as.numeric(pt.iso),
ttp.iso = as.numeric(ttp.iso))
data %>%
pivot_longer(names_to = "Test",
values_to = "values",
cols = pt.60:ttp.iso) %>%
pivot_wider(names_from = timepoint,
>>>>>>> 1a5e2ed26a583b4c0d35ceaf2e34213c18098722
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
<<<<<<< HEAD
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
print()
tab <- data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
=======
group_by(Test, leg) %>%
summarise(mean = mean(pre, na.rm = T),
min = min(pre, na.rm = T),
max = max(pre, na.rm = T),
sd = sd(pre, na.rm = T)) %>% gt()
data %>%
pivot_longer(names_to = "variable",
values_to = "values",
cols = pt.60:ttp.iso) %>%
pivot_wider(names_from = timepoint,
>>>>>>> 1a5e2ed26a583b4c0d35ceaf2e34213c18098722
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60", "120", "240", "360", "480", "isometric"))) %>%
print()
<<<<<<< HEAD
tab <- data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60", "120", "240", "360", "480", "isometric"))) %>%
arrange(speed) %>%
print()
library(flextable)
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60", "120", "240", "360", "480", "isometric"))) %>%
arrange(speed) %>%
flextable() %>%
print()
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60 (deg/s)", "120 (deg/s)", "240 (deg/s)", "360 (deg/s)", "480 (deg/s)", "isometric"))) %>%
arrange(speed) %>%
flextable() %>%
set_header_labels(speed = "",
L_pt = "Peak torque",
L_ttp = "Time to peak torque",
R_pt = "Peak torque",
R_ttp = "Time to peak torque",) %>%
print()
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60 (deg/s)", "120 (deg/s)", "240 (deg/s)", "360 (deg/s)", "480 (deg/s)", "isometric"))) %>%
arrange(speed) %>%
flextable() %>%
set_header_labels(speed = "",
L_pt = "Peak torque",
L_ttp = "Time to peak torque",
R_pt = "Peak torque",
R_ttp = "Time to peak torque") %>%
print()
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60 (deg/s)", "120 (deg/s)", "240 (deg/s)", "360 (deg/s)", "480 (deg/s)", "isometric (60 deg)"))) %>%
arrange(speed) %>%
flextable() %>%
set_header_labels(speed = "",
L_pt = "Peak torque",
L_ttp = "Time to peak torque",
R_pt = "Peak torque",
R_ttp = "Time to peak torque") %>%
print()
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60 (deg/s)", "120 (deg/s)", "240 (deg/s)", "360 (deg/s)", "480 (deg/s)", "isometric (60 deg)"))) %>%
arrange(speed) %>%
flextable() %>%
set_header_labels(speed = "",
L_pt = "Peak torque",
L_ttp = "Time to peak torque",
R_pt = "Peak torque",
R_ttp = "Time to peak torque") %>%
add_header_row(values = c("", "Left", "Left", "Right", "Right")) %>%
print()
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60 (deg/s)", "120 (deg/s)", "240 (deg/s)", "360 (deg/s)", "480 (deg/s)", "isometric (60 deg)"))) %>%
arrange(speed) %>%
flextable() %>%
set_header_labels(speed = "",
L_pt = "Peak torque",
L_ttp = "Time to peak torque",
R_pt = "Peak torque",
R_ttp = "Time to peak torque") %>%
add_header_row(values = c("", "Left", "Left", "Right", "Right")) %>%
merge_at(part = "header", i = 1, j = 2:3) %>%
merge_at(part = "header", i = 1, j = 4:5) %>%
print()
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60 (deg/s)", "120 (deg/s)", "240 (deg/s)", "360 (deg/s)", "480 (deg/s)", "isometric (60 deg)"))) %>%
arrange(speed) %>%
flextable() %>%
set_header_labels(speed = "",
L_pt = "Peak torque",
L_ttp = "Time to peak torque",
R_pt = "Peak torque",
R_ttp = "Time to peak torque") %>%
add_header_row(values = c("", "Left", "Left", "Right", "Right")) %>%
merge_at(part = "header", i = 1, j = 2:3) %>%
merge_at(part = "header", i = 1, j = 4:5) %>%
add_footer_row(values = "Values are typical error and (coefficient of variation", colwidths = 5) %>%
autofit() %>%
print()
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60 (deg/s)", "120 (deg/s)", "240 (deg/s)", "360 (deg/s)", "480 (deg/s)", "isometric (60 deg)"))) %>%
arrange(speed) %>%
flextable() %>%
set_header_labels(speed = "",
L_pt = "Peak torque",
L_ttp = "Time to peak torque\n (s)",
R_pt = "Peak torque",
R_ttp = "Time to peak torque") %>%
add_header_row(values = c("", "Left", "Left", "Right", "Right")) %>%
merge_at(part = "header", i = 1, j = 2:3) %>%
merge_at(part = "header", i = 1, j = 4:5) %>%
add_footer_row(values = "All values are presented as typical error (coefficient of variation)", colwidths = 5) %>%
autofit()
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>%
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>%
pivot_wider(names_from = variable,
values_from = values) %>%
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>%
pivot_wider(names_from = timepoint,
values_from = value) %>%
mutate(diff = post - pre) %>%
group_by(leg, variable, speed) %>%
summarise(m = mean(c(pre, post), na.rm = T),
sd = sd(diff, na.rm = T),
te = sd / sqrt(2),
cv = 100 * (te / m),
L = qt(0.975, 4) * sd) %>%
mutate(te_cv =  paste0(signif(te, 2),
" (",
signif(cv, 2),
")"),
leg_var = paste(leg, variable, sep = "_")) %>%
ungroup() %>%
select(speed, te_cv, leg_var) %>%
pivot_wider(names_from = leg_var,
values_from = te_cv) %>%
mutate(speed = factor(speed, levels = c("60", "120", "240", "360", "480", "iso"),
labels = c("60 (deg/s)", "120 (deg/s)", "240 (deg/s)", "360 (deg/s)", "480 (deg/s)", "isometric (60 deg)"))) %>%
arrange(speed) %>%
flextable() %>%
set_header_labels(speed = "",
L_pt = "Peak torque\n (N/m)",
L_ttp = "Time to peak torque\n (seconds)",
R_pt = "Peak torque\n (N/m)",
R_ttp = "Time to peak torque\n (seconds)") %>%
add_header_row(values = c("", "Left Leg", "Left Leg", "Right Leg", "Right Leg")) %>%
merge_at(part = "header", i = 1, j = 2:3) %>%
merge_at(part = "header", i = 1, j = 4:5) %>%
add_footer_row(values = "All values are presented as typical error (coefficient of variation)", colwidths = 5) %>%
autofit()
data %>%
pivot_longer(cols = pt.60:ttp.iso,
names_to = "variable",
values_to = "values") %>% # make the dataset into long format
mutate(variable = gsub("pt.", "pt_", variable),
variable = gsub("ttp.", "ttp_", variable)) %>% # separate variable strings with "_" instead of "."
pivot_wider(names_from = variable,
values_from = values) %>% # pivot back to wide format with the new separator
pivot_longer(cols = pt_60:ttp_iso,
names_to = c("variable", "speed"),
names_sep = "_",
values_to = "value") %>% # use the new separator to split the "variable" into "variable" and "speed" and transform into long format
pivot_wider(names_from = timepoint,
values_from = value) %>% # transform the dataset back to wide format for easy calculations of differences from pre to post
mutate(diff = post - pre) %>% # make a new column named "diff" with differences scores
group_by(leg, variable, speed) %>% # make a grouped dataset based on leg, variable and speed
summarise(m = mean(c(pre, post), na.rm = T), # calculate the average score from both pre and post testing
sd = sd(diff, na.rm = T), # calculate the standard divination of the diff scores
te = sd / sqrt(2), # calculate the typical error of the diff scores
cv = 100 * (te / m), # calculate the relative typical error (coefficient of variation)
L = qt(0.975, 4) * sd) %>% print() # calculate the limits of agreement for diff scores
install.packages("gt")
install.packages("gt_tbl")
=======
data %>%
pivot_longer(names_to = "Test",
values_to = "values",
cols = pt.60:ttp.iso) %>%
pivot_wider(names_from = timepoint,
values_from = values) %>%
mutate(diff = post - pre) %>%
group_by(Test, leg) %>%
summarise(mean = mean(pre, na.rm = T),
min = min(pre, na.rm = T),
max = max(pre, na.rm = T),
sd = sd(pre, na.rm = T)) %>% gt()
data %>%
pivot_longer(names_to = "Test",
values_to = "values",
cols = pt.60:ttp.iso) %>%
pivot_wider(names_from = timepoint,
values_from = values) %>%
mutate(diff = post - pre) %>%
group_by(Test, leg) %>%
summarise(mean = mean(pre, na.rm = T),
min = min(pre, na.rm = T),
max = max(pre, na.rm = T),
sd = sd(pre, na.rm = T)) %>% gt()
library(gt_tbl)
library(gtable)
library(gt_tbl)
library(gt_tbl)
data <- read_excel("data/humac-data.xlsx") %>%
mutate(pt.120 = as.numeric(pt.120),
ttp.120 = as.numeric(ttp.120),
pt.240 = as.numeric(pt.240),
ttp.240 = as.numeric(ttp.240),
pt.360 = as.numeric(pt.360),
ttp.360 = as.numeric(ttp.360),
pt.480 = as.numeric(pt.480),
ttp.480 = as.numeric(ttp.480),
pt.iso = as.numeric(pt.iso),
ttp.iso = as.numeric(ttp.iso))
>>>>>>> 1a5e2ed26a583b4c0d35ceaf2e34213c18098722
